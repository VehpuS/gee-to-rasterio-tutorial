[
  {
    "objectID": "gee-to-rasterio.html",
    "href": "gee-to-rasterio.html",
    "title": "Google Earth Engine to Rasterio",
    "section": "",
    "text": "I recommend running in a virtual environment / colab.\n\npip install jupyter_contrib_nbextensions\npip install RISE\npip install geemap\npip install eemont\npip install autopep8\npip install rasterio\npip install numpy\npip install blockdiagMagic\n\nCollecting jupyter_contrib_nbextensions\n  Downloading jupyter_contrib_nbextensions-0.5.1-py2.py3-none-any.whl (20.9 MB)\nRequirement already satisfied: notebook>=4.0 in ./.venv/lib/python3.9/site-packages (from jupyter_contrib_nbextensions) (6.4.12)\nRequirement already satisfied: ipython-genutils in ./.venv/lib/python3.9/site-packages (from jupyter_contrib_nbextensions) (0.2.0)\nRequirement already satisfied: jupyter-core in ./.venv/lib/python3.9/site-packages (from jupyter_contrib_nbextensions) (4.11.1)\nRequirement already satisfied: traitlets>=4.1 in ./.venv/lib/python3.9/site-packages (from jupyter_contrib_nbextensions) (5.3.0)\nCollecting jupyter-latex-envs>=1.3.8\n  Downloading jupyter_latex_envs-1.4.6.tar.gz (861 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting jupyter-nbextensions-configurator>=0.4.0\n  Downloading jupyter_nbextensions_configurator-0.5.0-py2.py3-none-any.whl (467 kB)\nRequirement already satisfied: lxml in ./.venv/lib/python3.9/site-packages (from jupyter_contrib_nbextensions) (4.9.1)\nRequirement already satisfied: nbconvert>=4.2 in ./.venv/lib/python3.9/site-packages (from jupyter_contrib_nbextensions) (7.0.0)\nRequirement already satisfied: tornado in ./.venv/lib/python3.9/site-packages (from jupyter_contrib_nbextensions) (6.2)\nCollecting jupyter-contrib-core>=0.3.3\n  Downloading jupyter_contrib_core-0.4.0-py2.py3-none-any.whl (17 kB)\nCollecting pyyaml\n  Downloading PyYAML-6.0-cp39-cp39-macosx_10_9_x86_64.whl (197 kB)\nCollecting jupyter-highlight-selected-word>=0.1.1\n  Downloading jupyter_highlight_selected_word-0.2.0-py2.py3-none-any.whl (11 kB)\nRequirement already satisfied: setuptools in ./.venv/lib/python3.9/site-packages (from jupyter-contrib-core>=0.3.3->jupyter_contrib_nbextensions) (59.0.1)\nRequirement already satisfied: ipython in ./.venv/lib/python3.9/site-packages (from jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (8.4.0)\nRequirement already satisfied: bleach in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (5.0.1)\nRequirement already satisfied: beautifulsoup4 in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (4.11.1)\nRequirement already satisfied: importlib-metadata>=3.6 in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (4.12.0)\nRequirement already satisfied: jinja2>=3.0 in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (3.1.2)\nRequirement already satisfied: jupyterlab-pygments in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (0.2.2)\nRequirement already satisfied: pygments>=2.4.1 in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (2.13.0)\nRequirement already satisfied: defusedxml in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (0.7.1)\nRequirement already satisfied: nbclient>=0.5.0 in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (0.6.7)\nRequirement already satisfied: packaging in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (21.3)\nRequirement already satisfied: markupsafe>=2.0 in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (2.1.1)\nRequirement already satisfied: pandocfilters>=1.4.1 in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (1.5.0)\nRequirement already satisfied: nbformat>=5.1 in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (5.4.0)\nRequirement already satisfied: mistune<3,>=2.0.3 in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (2.0.4)\nRequirement already satisfied: tinycss2 in ./.venv/lib/python3.9/site-packages (from nbconvert>=4.2->jupyter_contrib_nbextensions) (1.1.1)\nRequirement already satisfied: pyzmq>=17 in ./.venv/lib/python3.9/site-packages (from notebook>=4.0->jupyter_contrib_nbextensions) (23.2.1)\nRequirement already satisfied: ipykernel in ./.venv/lib/python3.9/site-packages (from notebook>=4.0->jupyter_contrib_nbextensions) (6.15.2)\nRequirement already satisfied: Send2Trash>=1.8.0 in ./.venv/lib/python3.9/site-packages (from notebook>=4.0->jupyter_contrib_nbextensions) (1.8.0)\nRequirement already satisfied: prometheus-client in ./.venv/lib/python3.9/site-packages (from notebook>=4.0->jupyter_contrib_nbextensions) (0.14.1)\nRequirement already satisfied: argon2-cffi in ./.venv/lib/python3.9/site-packages (from notebook>=4.0->jupyter_contrib_nbextensions) (21.3.0)\nRequirement already satisfied: nest-asyncio>=1.5 in ./.venv/lib/python3.9/site-packages (from notebook>=4.0->jupyter_contrib_nbextensions) (1.5.5)\nRequirement already satisfied: terminado>=0.8.3 in ./.venv/lib/python3.9/site-packages (from notebook>=4.0->jupyter_contrib_nbextensions) (0.15.0)\nRequirement already satisfied: jupyter-client>=5.3.4 in ./.venv/lib/python3.9/site-packages (from notebook>=4.0->jupyter_contrib_nbextensions) (7.3.5)\nRequirement already satisfied: zipp>=0.5 in ./.venv/lib/python3.9/site-packages (from importlib-metadata>=3.6->nbconvert>=4.2->jupyter_contrib_nbextensions) (3.8.1)\nRequirement already satisfied: python-dateutil>=2.8.2 in ./.venv/lib/python3.9/site-packages (from jupyter-client>=5.3.4->notebook>=4.0->jupyter_contrib_nbextensions) (2.8.2)\nRequirement already satisfied: entrypoints in ./.venv/lib/python3.9/site-packages (from jupyter-client>=5.3.4->notebook>=4.0->jupyter_contrib_nbextensions) (0.4)\nRequirement already satisfied: jsonschema>=2.6 in ./.venv/lib/python3.9/site-packages (from nbformat>=5.1->nbconvert>=4.2->jupyter_contrib_nbextensions) (4.14.0)\nRequirement already satisfied: fastjsonschema in ./.venv/lib/python3.9/site-packages (from nbformat>=5.1->nbconvert>=4.2->jupyter_contrib_nbextensions) (2.16.1)\nRequirement already satisfied: ptyprocess in ./.venv/lib/python3.9/site-packages (from terminado>=0.8.3->notebook>=4.0->jupyter_contrib_nbextensions) (0.7.0)\nRequirement already satisfied: argon2-cffi-bindings in ./.venv/lib/python3.9/site-packages (from argon2-cffi->notebook>=4.0->jupyter_contrib_nbextensions) (21.2.0)\nRequirement already satisfied: soupsieve>1.2 in ./.venv/lib/python3.9/site-packages (from beautifulsoup4->nbconvert>=4.2->jupyter_contrib_nbextensions) (2.3.2.post1)\nRequirement already satisfied: webencodings in ./.venv/lib/python3.9/site-packages (from bleach->nbconvert>=4.2->jupyter_contrib_nbextensions) (0.5.1)\nRequirement already satisfied: six>=1.9.0 in ./.venv/lib/python3.9/site-packages (from bleach->nbconvert>=4.2->jupyter_contrib_nbextensions) (1.16.0)\nRequirement already satisfied: appnope in ./.venv/lib/python3.9/site-packages (from ipykernel->notebook>=4.0->jupyter_contrib_nbextensions) (0.1.3)\nRequirement already satisfied: psutil in ./.venv/lib/python3.9/site-packages (from ipykernel->notebook>=4.0->jupyter_contrib_nbextensions) (5.9.1)\nRequirement already satisfied: debugpy>=1.0 in ./.venv/lib/python3.9/site-packages (from ipykernel->notebook>=4.0->jupyter_contrib_nbextensions) (1.6.3)\nRequirement already satisfied: matplotlib-inline>=0.1 in ./.venv/lib/python3.9/site-packages (from ipykernel->notebook>=4.0->jupyter_contrib_nbextensions) (0.1.6)\nRequirement already satisfied: pickleshare in ./.venv/lib/python3.9/site-packages (from ipython->jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (0.7.5)\nRequirement already satisfied: decorator in ./.venv/lib/python3.9/site-packages (from ipython->jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (5.1.1)\nRequirement already satisfied: stack-data in ./.venv/lib/python3.9/site-packages (from ipython->jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (0.5.0)\nRequirement already satisfied: jedi>=0.16 in ./.venv/lib/python3.9/site-packages (from ipython->jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (0.18.1)\nRequirement already satisfied: backcall in ./.venv/lib/python3.9/site-packages (from ipython->jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (0.2.0)\nRequirement already satisfied: prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0 in ./.venv/lib/python3.9/site-packages (from ipython->jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (3.0.30)\n\n\nRequirement already satisfied: pexpect>4.3 in ./.venv/lib/python3.9/site-packages (from ipython->jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (4.8.0)\nRequirement already satisfied: pyparsing!=3.0.5,>=2.0.2 in ./.venv/lib/python3.9/site-packages (from packaging->nbconvert>=4.2->jupyter_contrib_nbextensions) (3.0.9)\nRequirement already satisfied: parso<0.9.0,>=0.8.0 in ./.venv/lib/python3.9/site-packages (from jedi>=0.16->ipython->jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (0.8.3)\nRequirement already satisfied: attrs>=17.4.0 in ./.venv/lib/python3.9/site-packages (from jsonschema>=2.6->nbformat>=5.1->nbconvert>=4.2->jupyter_contrib_nbextensions) (22.1.0)\nRequirement already satisfied: pyrsistent!=0.17.0,!=0.17.1,!=0.17.2,>=0.14.0 in ./.venv/lib/python3.9/site-packages (from jsonschema>=2.6->nbformat>=5.1->nbconvert>=4.2->jupyter_contrib_nbextensions) (0.18.1)\nRequirement already satisfied: wcwidth in ./.venv/lib/python3.9/site-packages (from prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0->ipython->jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (0.2.5)\nRequirement already satisfied: cffi>=1.0.1 in ./.venv/lib/python3.9/site-packages (from argon2-cffi-bindings->argon2-cffi->notebook>=4.0->jupyter_contrib_nbextensions) (1.15.1)\nRequirement already satisfied: executing in ./.venv/lib/python3.9/site-packages (from stack-data->ipython->jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (1.0.0)\nRequirement already satisfied: pure-eval in ./.venv/lib/python3.9/site-packages (from stack-data->ipython->jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (0.2.2)\nRequirement already satisfied: asttokens in ./.venv/lib/python3.9/site-packages (from stack-data->ipython->jupyter-latex-envs>=1.3.8->jupyter_contrib_nbextensions) (2.0.8)\nRequirement already satisfied: pycparser in ./.venv/lib/python3.9/site-packages (from cffi>=1.0.1->argon2-cffi-bindings->argon2-cffi->notebook>=4.0->jupyter_contrib_nbextensions) (2.21)\nUsing legacy 'setup.py install' for jupyter-latex-envs, since package 'wheel' is not installed.\nInstalling collected packages: pyyaml, jupyter-contrib-core, jupyter-nbextensions-configurator, jupyter-latex-envs, jupyter-highlight-selected-word, jupyter-contrib-nbextensions\n    Running setup.py install for jupyter-latex-envs: started\n    Running setup.py install for jupyter-latex-envs: finished with status 'done'\nSuccessfully installed jupyter-contrib-core-0.4.0 jupyter-contrib-nbextensions-0.5.1 jupyter-highlight-selected-word-0.2.0 jupyter-latex-envs-1.4.6 jupyter-nbextensions-configurator-0.5.0 pyyaml-6.0\n\n\nWARNING: You are using pip version 21.3.1; however, version 22.2.2 is available.\nYou should consider upgrading via the '/Users/vehpus/git/gee-to-rasterio-tutorial/.venv/bin/python3.9 -m pip install --upgrade pip' command.\n\n\nCollecting RISE\n  Downloading rise-5.7.1-py2.py3-none-any.whl (4.3 MB)\nRequirement already satisfied: notebook>=6.0 in ./.venv/lib/python3.9/site-packages (from RISE) (6.4.12)\nRequirement already satisfied: traitlets>=4.2.1 in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (5.3.0)\nRequirement already satisfied: jupyter-core>=4.6.1 in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (4.11.1)\nRequirement already satisfied: nbformat in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (5.4.0)\nRequirement already satisfied: jinja2 in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (3.1.2)\nRequirement already satisfied: ipython-genutils in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (0.2.0)\nRequirement already satisfied: pyzmq>=17 in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (23.2.1)\nRequirement already satisfied: argon2-cffi in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (21.3.0)\nRequirement already satisfied: nbconvert>=5 in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (7.0.0)\nRequirement already satisfied: nest-asyncio>=1.5 in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (1.5.5)\nRequirement already satisfied: jupyter-client>=5.3.4 in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (7.3.5)\nRequirement already satisfied: Send2Trash>=1.8.0 in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (1.8.0)\nRequirement already satisfied: terminado>=0.8.3 in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (0.15.0)\nRequirement already satisfied: tornado>=6.1 in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (6.2)\nRequirement already satisfied: ipykernel in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (6.15.2)\nRequirement already satisfied: prometheus-client in ./.venv/lib/python3.9/site-packages (from notebook>=6.0->RISE) (0.14.1)\nRequirement already satisfied: entrypoints in ./.venv/lib/python3.9/site-packages (from jupyter-client>=5.3.4->notebook>=6.0->RISE) (0.4)\nRequirement already satisfied: python-dateutil>=2.8.2 in ./.venv/lib/python3.9/site-packages (from jupyter-client>=5.3.4->notebook>=6.0->RISE) (2.8.2)\nRequirement already satisfied: jupyterlab-pygments in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (0.2.2)\nRequirement already satisfied: pandocfilters>=1.4.1 in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (1.5.0)\nRequirement already satisfied: importlib-metadata>=3.6 in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (4.12.0)\nRequirement already satisfied: nbclient>=0.5.0 in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (0.6.7)\nRequirement already satisfied: defusedxml in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (0.7.1)\nRequirement already satisfied: pygments>=2.4.1 in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (2.13.0)\nRequirement already satisfied: mistune<3,>=2.0.3 in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (2.0.4)\nRequirement already satisfied: lxml in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (4.9.1)\nRequirement already satisfied: beautifulsoup4 in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (4.11.1)\nRequirement already satisfied: tinycss2 in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (1.1.1)\nRequirement already satisfied: bleach in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (5.0.1)\nRequirement already satisfied: packaging in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (21.3)\nRequirement already satisfied: markupsafe>=2.0 in ./.venv/lib/python3.9/site-packages (from nbconvert>=5->notebook>=6.0->RISE) (2.1.1)\nRequirement already satisfied: fastjsonschema in ./.venv/lib/python3.9/site-packages (from nbformat->notebook>=6.0->RISE) (2.16.1)\nRequirement already satisfied: jsonschema>=2.6 in ./.venv/lib/python3.9/site-packages (from nbformat->notebook>=6.0->RISE) (4.14.0)\nRequirement already satisfied: ptyprocess in ./.venv/lib/python3.9/site-packages (from terminado>=0.8.3->notebook>=6.0->RISE) (0.7.0)\nRequirement already satisfied: argon2-cffi-bindings in ./.venv/lib/python3.9/site-packages (from argon2-cffi->notebook>=6.0->RISE) (21.2.0)\nRequirement already satisfied: appnope in ./.venv/lib/python3.9/site-packages (from ipykernel->notebook>=6.0->RISE) (0.1.3)\nRequirement already satisfied: matplotlib-inline>=0.1 in ./.venv/lib/python3.9/site-packages (from ipykernel->notebook>=6.0->RISE) (0.1.6)\nRequirement already satisfied: psutil in ./.venv/lib/python3.9/site-packages (from ipykernel->notebook>=6.0->RISE) (5.9.1)\nRequirement already satisfied: debugpy>=1.0 in ./.venv/lib/python3.9/site-packages (from ipykernel->notebook>=6.0->RISE) (1.6.3)\nRequirement already satisfied: ipython>=7.23.1 in ./.venv/lib/python3.9/site-packages (from ipykernel->notebook>=6.0->RISE) (8.4.0)\nRequirement already satisfied: zipp>=0.5 in ./.venv/lib/python3.9/site-packages (from importlib-metadata>=3.6->nbconvert>=5->notebook>=6.0->RISE) (3.8.1)\nRequirement already satisfied: stack-data in ./.venv/lib/python3.9/site-packages (from ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (0.5.0)\nRequirement already satisfied: jedi>=0.16 in ./.venv/lib/python3.9/site-packages (from ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (0.18.1)\nRequirement already satisfied: pexpect>4.3 in ./.venv/lib/python3.9/site-packages (from ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (4.8.0)\nRequirement already satisfied: pickleshare in ./.venv/lib/python3.9/site-packages (from ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (0.7.5)\nRequirement already satisfied: prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0 in ./.venv/lib/python3.9/site-packages (from ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (3.0.30)\nRequirement already satisfied: setuptools>=18.5 in ./.venv/lib/python3.9/site-packages (from ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (59.0.1)\nRequirement already satisfied: decorator in ./.venv/lib/python3.9/site-packages (from ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (5.1.1)\nRequirement already satisfied: backcall in ./.venv/lib/python3.9/site-packages (from ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (0.2.0)\nRequirement already satisfied: attrs>=17.4.0 in ./.venv/lib/python3.9/site-packages (from jsonschema>=2.6->nbformat->notebook>=6.0->RISE) (22.1.0)\nRequirement already satisfied: pyrsistent!=0.17.0,!=0.17.1,!=0.17.2,>=0.14.0 in ./.venv/lib/python3.9/site-packages (from jsonschema>=2.6->nbformat->notebook>=6.0->RISE) (0.18.1)\nRequirement already satisfied: six>=1.5 in ./.venv/lib/python3.9/site-packages (from python-dateutil>=2.8.2->jupyter-client>=5.3.4->notebook>=6.0->RISE) (1.16.0)\nRequirement already satisfied: cffi>=1.0.1 in ./.venv/lib/python3.9/site-packages (from argon2-cffi-bindings->argon2-cffi->notebook>=6.0->RISE) (1.15.1)\nRequirement already satisfied: soupsieve>1.2 in ./.venv/lib/python3.9/site-packages (from beautifulsoup4->nbconvert>=5->notebook>=6.0->RISE) (2.3.2.post1)\nRequirement already satisfied: webencodings in ./.venv/lib/python3.9/site-packages (from bleach->nbconvert>=5->notebook>=6.0->RISE) (0.5.1)\nRequirement already satisfied: pyparsing!=3.0.5,>=2.0.2 in ./.venv/lib/python3.9/site-packages (from packaging->nbconvert>=5->notebook>=6.0->RISE) (3.0.9)\nRequirement already satisfied: pycparser in ./.venv/lib/python3.9/site-packages (from cffi>=1.0.1->argon2-cffi-bindings->argon2-cffi->notebook>=6.0->RISE) (2.21)\nRequirement already satisfied: parso<0.9.0,>=0.8.0 in ./.venv/lib/python3.9/site-packages (from jedi>=0.16->ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (0.8.3)\nRequirement already satisfied: wcwidth in ./.venv/lib/python3.9/site-packages (from prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0->ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (0.2.5)\nRequirement already satisfied: pure-eval in ./.venv/lib/python3.9/site-packages (from stack-data->ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (0.2.2)\n\n\nRequirement already satisfied: executing in ./.venv/lib/python3.9/site-packages (from stack-data->ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (1.0.0)\nRequirement already satisfied: asttokens in ./.venv/lib/python3.9/site-packages (from stack-data->ipython>=7.23.1->ipykernel->notebook>=6.0->RISE) (2.0.8)\nInstalling collected packages: RISE\nSuccessfully installed RISE-5.7.1\n\n\nWARNING: You are using pip version 21.3.1; however, version 22.2.2 is available.\nYou should consider upgrading via the '/Users/vehpus/git/gee-to-rasterio-tutorial/.venv/bin/python3.9 -m pip install --upgrade pip' command.\n\n\nRequirement already satisfied: geemap in ./.venv/lib/python3.9/site-packages (0.16.7)\nRequirement already satisfied: xyzservices in ./.venv/lib/python3.9/site-packages (from geemap) (2022.6.0)\nRequirement already satisfied: whiteboxgui>=0.6.0 in ./.venv/lib/python3.9/site-packages (from geemap) (0.7.0)\nRequirement already satisfied: colour in ./.venv/lib/python3.9/site-packages (from geemap) (0.1.5)\nRequirement already satisfied: ee-extra>=0.0.10 in ./.venv/lib/python3.9/site-packages (from geemap) (0.0.14)\nRequirement already satisfied: matplotlib in ./.venv/lib/python3.9/site-packages (from geemap) (3.5.3)\nRequirement already satisfied: numpy in ./.venv/lib/python3.9/site-packages (from geemap) (1.23.2)\nRequirement already satisfied: pycrs in ./.venv/lib/python3.9/site-packages (from geemap) (1.0.2)\nRequirement already satisfied: pandas in ./.venv/lib/python3.9/site-packages (from geemap) (1.4.3)\nRequirement already satisfied: pyshp>=2.1.3 in ./.venv/lib/python3.9/site-packages (from geemap) (2.3.1)\nRequirement already satisfied: ipyleaflet>=0.17.0 in ./.venv/lib/python3.9/site-packages (from geemap) (0.17.1)\nRequirement already satisfied: pillow in ./.venv/lib/python3.9/site-packages (from geemap) (9.2.0)\nRequirement already satisfied: bqplot in ./.venv/lib/python3.9/site-packages (from geemap) (0.12.34)\nRequirement already satisfied: python-box in ./.venv/lib/python3.9/site-packages (from geemap) (6.0.2)\nRequirement already satisfied: gdown in ./.venv/lib/python3.9/site-packages (from geemap) (4.5.1)\nRequirement already satisfied: jupyterlab>=3 in ./.venv/lib/python3.9/site-packages (from geemap) (3.4.5)\nRequirement already satisfied: ipyevents in ./.venv/lib/python3.9/site-packages (from geemap) (2.0.1)\nRequirement already satisfied: folium>=0.11.0 in ./.venv/lib/python3.9/site-packages (from geemap) (0.12.1.post1)\nRequirement already satisfied: geeadd>=0.5.1 in ./.venv/lib/python3.9/site-packages (from geemap) (0.5.5)\nRequirement already satisfied: geojson in ./.venv/lib/python3.9/site-packages (from geemap) (2.5.0)\nRequirement already satisfied: ipytree in ./.venv/lib/python3.9/site-packages (from geemap) (0.2.2)\nRequirement already satisfied: scooby in ./.venv/lib/python3.9/site-packages (from geemap) (0.6.0)\nRequirement already satisfied: sankee>=0.1.0 in ./.venv/lib/python3.9/site-packages (from geemap) (0.2.0)\nRequirement already satisfied: earthengine-api>=0.1.304 in ./.venv/lib/python3.9/site-packages (from geemap) (0.1.321)\nRequirement already satisfied: ffmpeg-python in ./.venv/lib/python3.9/site-packages (from geemap) (0.2.0)\nRequirement already satisfied: ipyfilechooser>=0.6.0 in ./.venv/lib/python3.9/site-packages (from geemap) (0.6.0)\nRequirement already satisfied: geocoder in ./.venv/lib/python3.9/site-packages (from geemap) (1.38.1)\nRequirement already satisfied: future in ./.venv/lib/python3.9/site-packages (from earthengine-api>=0.1.304->geemap) (0.18.2)\nRequirement already satisfied: google-cloud-storage in ./.venv/lib/python3.9/site-packages (from earthengine-api>=0.1.304->geemap) (2.5.0)\nRequirement already satisfied: google-api-python-client<2,>=1.12.1 in ./.venv/lib/python3.9/site-packages (from earthengine-api>=0.1.304->geemap) (1.12.11)\nRequirement already satisfied: google-auth>=1.4.1 in ./.venv/lib/python3.9/site-packages (from earthengine-api>=0.1.304->geemap) (2.11.0)\nRequirement already satisfied: google-auth-httplib2>=0.0.3 in ./.venv/lib/python3.9/site-packages (from earthengine-api>=0.1.304->geemap) (0.1.0)\nRequirement already satisfied: httplib2<1dev,>=0.9.2 in ./.venv/lib/python3.9/site-packages (from earthengine-api>=0.1.304->geemap) (0.20.4)\nRequirement already satisfied: httplib2shim in ./.venv/lib/python3.9/site-packages (from earthengine-api>=0.1.304->geemap) (0.0.3)\nRequirement already satisfied: six in ./.venv/lib/python3.9/site-packages (from earthengine-api>=0.1.304->geemap) (1.16.0)\nRequirement already satisfied: requests in ./.venv/lib/python3.9/site-packages (from folium>=0.11.0->geemap) (2.28.1)\nRequirement already satisfied: jinja2>=2.9 in ./.venv/lib/python3.9/site-packages (from folium>=0.11.0->geemap) (3.1.2)\nRequirement already satisfied: branca>=0.3.0 in ./.venv/lib/python3.9/site-packages (from folium>=0.11.0->geemap) (0.5.0)\nRequirement already satisfied: logzero>=1.5.0 in ./.venv/lib/python3.9/site-packages (from geeadd>=0.5.1->geemap) (1.7.0)\nRequirement already satisfied: beautifulsoup4>=4.9.0 in ./.venv/lib/python3.9/site-packages (from geeadd>=0.5.1->geemap) (4.11.1)\nRequirement already satisfied: ipywidgets in ./.venv/lib/python3.9/site-packages (from ipyfilechooser>=0.6.0->geemap) (8.0.1)\nRequirement already satisfied: traittypes<3,>=0.2.1 in ./.venv/lib/python3.9/site-packages (from ipyleaflet>=0.17.0->geemap) (0.2.1)\nRequirement already satisfied: jupyterlab-server~=2.10 in ./.venv/lib/python3.9/site-packages (from jupyterlab>=3->geemap) (2.15.1)\nRequirement already satisfied: nbclassic in ./.venv/lib/python3.9/site-packages (from jupyterlab>=3->geemap) (0.4.3)\nRequirement already satisfied: jupyter-server~=1.16 in ./.venv/lib/python3.9/site-packages (from jupyterlab>=3->geemap) (1.18.1)\nRequirement already satisfied: notebook<7 in ./.venv/lib/python3.9/site-packages (from jupyterlab>=3->geemap) (6.4.12)\nRequirement already satisfied: jupyter-core in ./.venv/lib/python3.9/site-packages (from jupyterlab>=3->geemap) (4.11.1)\nRequirement already satisfied: packaging in ./.venv/lib/python3.9/site-packages (from jupyterlab>=3->geemap) (21.3)\nRequirement already satisfied: tornado>=6.1.0 in ./.venv/lib/python3.9/site-packages (from jupyterlab>=3->geemap) (6.2)\nRequirement already satisfied: ipython in ./.venv/lib/python3.9/site-packages (from jupyterlab>=3->geemap) (8.4.0)\nRequirement already satisfied: plotly>=5.2.2 in ./.venv/lib/python3.9/site-packages (from sankee>=0.1.0->geemap) (5.10.0)\nRequirement already satisfied: whitebox in ./.venv/lib/python3.9/site-packages (from whiteboxgui>=0.6.0->geemap) (2.1.4)\nRequirement already satisfied: traitlets>=4.3.0 in ./.venv/lib/python3.9/site-packages (from bqplot->geemap) (5.3.0)\nRequirement already satisfied: python-dateutil>=2.8.1 in ./.venv/lib/python3.9/site-packages (from pandas->geemap) (2.8.2)\nRequirement already satisfied: pytz>=2020.1 in ./.venv/lib/python3.9/site-packages (from pandas->geemap) (2022.2.1)\nRequirement already satisfied: tqdm in ./.venv/lib/python3.9/site-packages (from gdown->geemap) (4.64.0)\nRequirement already satisfied: filelock in ./.venv/lib/python3.9/site-packages (from gdown->geemap) (3.8.0)\nRequirement already satisfied: click in ./.venv/lib/python3.9/site-packages (from geocoder->geemap) (8.1.3)\nRequirement already satisfied: ratelim in ./.venv/lib/python3.9/site-packages (from geocoder->geemap) (0.1.6)\nRequirement already satisfied: cycler>=0.10 in ./.venv/lib/python3.9/site-packages (from matplotlib->geemap) (0.11.0)\nRequirement already satisfied: fonttools>=4.22.0 in ./.venv/lib/python3.9/site-packages (from matplotlib->geemap) (4.37.1)\nRequirement already satisfied: kiwisolver>=1.0.1 in ./.venv/lib/python3.9/site-packages (from matplotlib->geemap) (1.4.4)\nRequirement already satisfied: pyparsing>=2.2.1 in ./.venv/lib/python3.9/site-packages (from matplotlib->geemap) (3.0.9)\nRequirement already satisfied: soupsieve>1.2 in ./.venv/lib/python3.9/site-packages (from beautifulsoup4>=4.9.0->geeadd>=0.5.1->geemap) (2.3.2.post1)\nRequirement already satisfied: google-api-core<3dev,>=1.21.0 in ./.venv/lib/python3.9/site-packages (from google-api-python-client<2,>=1.12.1->earthengine-api>=0.1.304->geemap) (2.8.2)\nRequirement already satisfied: uritemplate<4dev,>=3.0.0 in ./.venv/lib/python3.9/site-packages (from google-api-python-client<2,>=1.12.1->earthengine-api>=0.1.304->geemap) (3.0.1)\nRequirement already satisfied: cachetools<6.0,>=2.0.0 in ./.venv/lib/python3.9/site-packages (from google-auth>=1.4.1->earthengine-api>=0.1.304->geemap) (5.2.0)\nRequirement already satisfied: rsa<5,>=3.1.4 in ./.venv/lib/python3.9/site-packages (from google-auth>=1.4.1->earthengine-api>=0.1.304->geemap) (4.9)\nRequirement already satisfied: pyasn1-modules>=0.2.1 in ./.venv/lib/python3.9/site-packages (from google-auth>=1.4.1->earthengine-api>=0.1.304->geemap) (0.2.8)\n\n\nRequirement already satisfied: widgetsnbextension~=4.0 in ./.venv/lib/python3.9/site-packages (from ipywidgets->ipyfilechooser>=0.6.0->geemap) (4.0.2)\nRequirement already satisfied: ipykernel>=4.5.1 in ./.venv/lib/python3.9/site-packages (from ipywidgets->ipyfilechooser>=0.6.0->geemap) (6.15.2)\nRequirement already satisfied: jupyterlab-widgets~=3.0 in ./.venv/lib/python3.9/site-packages (from ipywidgets->ipyfilechooser>=0.6.0->geemap) (3.0.2)\nRequirement already satisfied: prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0 in ./.venv/lib/python3.9/site-packages (from ipython->jupyterlab>=3->geemap) (3.0.30)\nRequirement already satisfied: stack-data in ./.venv/lib/python3.9/site-packages (from ipython->jupyterlab>=3->geemap) (0.5.0)\nRequirement already satisfied: decorator in ./.venv/lib/python3.9/site-packages (from ipython->jupyterlab>=3->geemap) (5.1.1)\nRequirement already satisfied: matplotlib-inline in ./.venv/lib/python3.9/site-packages (from ipython->jupyterlab>=3->geemap) (0.1.6)\nRequirement already satisfied: backcall in ./.venv/lib/python3.9/site-packages (from ipython->jupyterlab>=3->geemap) (0.2.0)\nRequirement already satisfied: setuptools>=18.5 in ./.venv/lib/python3.9/site-packages (from ipython->jupyterlab>=3->geemap) (59.0.1)\nRequirement already satisfied: appnope in ./.venv/lib/python3.9/site-packages (from ipython->jupyterlab>=3->geemap) (0.1.3)\nRequirement already satisfied: jedi>=0.16 in ./.venv/lib/python3.9/site-packages (from ipython->jupyterlab>=3->geemap) (0.18.1)\nRequirement already satisfied: pickleshare in ./.venv/lib/python3.9/site-packages (from ipython->jupyterlab>=3->geemap) (0.7.5)\nRequirement already satisfied: pexpect>4.3 in ./.venv/lib/python3.9/site-packages (from ipython->jupyterlab>=3->geemap) (4.8.0)\nRequirement already satisfied: pygments>=2.4.0 in ./.venv/lib/python3.9/site-packages (from ipython->jupyterlab>=3->geemap) (2.13.0)\nRequirement already satisfied: MarkupSafe>=2.0 in ./.venv/lib/python3.9/site-packages (from jinja2>=2.9->folium>=0.11.0->geemap) (2.1.1)\nRequirement already satisfied: websocket-client in ./.venv/lib/python3.9/site-packages (from jupyter-server~=1.16->jupyterlab>=3->geemap) (1.4.0)\nRequirement already satisfied: nbconvert>=6.4.4 in ./.venv/lib/python3.9/site-packages (from jupyter-server~=1.16->jupyterlab>=3->geemap) (7.0.0)\nRequirement already satisfied: argon2-cffi in ./.venv/lib/python3.9/site-packages (from jupyter-server~=1.16->jupyterlab>=3->geemap) (21.3.0)\nRequirement already satisfied: terminado>=0.8.3 in ./.venv/lib/python3.9/site-packages (from jupyter-server~=1.16->jupyterlab>=3->geemap) (0.15.0)\nRequirement already satisfied: nbformat>=5.2.0 in ./.venv/lib/python3.9/site-packages (from jupyter-server~=1.16->jupyterlab>=3->geemap) (5.4.0)\nRequirement already satisfied: Send2Trash in ./.venv/lib/python3.9/site-packages (from jupyter-server~=1.16->jupyterlab>=3->geemap) (1.8.0)\nRequirement already satisfied: anyio<4,>=3.1.0 in ./.venv/lib/python3.9/site-packages (from jupyter-server~=1.16->jupyterlab>=3->geemap) (3.6.1)\nRequirement already satisfied: prometheus-client in ./.venv/lib/python3.9/site-packages (from jupyter-server~=1.16->jupyterlab>=3->geemap) (0.14.1)\nRequirement already satisfied: pyzmq>=17 in ./.venv/lib/python3.9/site-packages (from jupyter-server~=1.16->jupyterlab>=3->geemap) (23.2.1)\nRequirement already satisfied: jupyter-client>=6.1.12 in ./.venv/lib/python3.9/site-packages (from jupyter-server~=1.16->jupyterlab>=3->geemap) (7.3.5)\nRequirement already satisfied: json5 in ./.venv/lib/python3.9/site-packages (from jupyterlab-server~=2.10->jupyterlab>=3->geemap) (0.9.10)\nRequirement already satisfied: babel in ./.venv/lib/python3.9/site-packages (from jupyterlab-server~=2.10->jupyterlab>=3->geemap) (2.10.3)\nRequirement already satisfied: importlib-metadata>=3.6 in ./.venv/lib/python3.9/site-packages (from jupyterlab-server~=2.10->jupyterlab>=3->geemap) (4.12.0)\nRequirement already satisfied: jsonschema>=3.0.1 in ./.venv/lib/python3.9/site-packages (from jupyterlab-server~=2.10->jupyterlab>=3->geemap) (4.14.0)\nRequirement already satisfied: ipython-genutils in ./.venv/lib/python3.9/site-packages (from notebook<7->jupyterlab>=3->geemap) (0.2.0)\nRequirement already satisfied: nest-asyncio>=1.5 in ./.venv/lib/python3.9/site-packages (from notebook<7->jupyterlab>=3->geemap) (1.5.5)\nRequirement already satisfied: tenacity>=6.2.0 in ./.venv/lib/python3.9/site-packages (from plotly>=5.2.2->sankee>=0.1.0->geemap) (8.0.1)\nRequirement already satisfied: charset-normalizer<3,>=2 in ./.venv/lib/python3.9/site-packages (from requests->folium>=0.11.0->geemap) (2.1.1)\nRequirement already satisfied: urllib3<1.27,>=1.21.1 in ./.venv/lib/python3.9/site-packages (from requests->folium>=0.11.0->geemap) (1.26.12)\nRequirement already satisfied: idna<4,>=2.5 in ./.venv/lib/python3.9/site-packages (from requests->folium>=0.11.0->geemap) (3.3)\nRequirement already satisfied: certifi>=2017.4.17 in ./.venv/lib/python3.9/site-packages (from requests->folium>=0.11.0->geemap) (2022.6.15)\nRequirement already satisfied: google-cloud-core<3.0dev,>=2.3.0 in ./.venv/lib/python3.9/site-packages (from google-cloud-storage->earthengine-api>=0.1.304->geemap) (2.3.2)\nRequirement already satisfied: google-resumable-media>=2.3.2 in ./.venv/lib/python3.9/site-packages (from google-cloud-storage->earthengine-api>=0.1.304->geemap) (2.3.3)\nRequirement already satisfied: notebook-shim>=0.1.0 in ./.venv/lib/python3.9/site-packages (from nbclassic->jupyterlab>=3->geemap) (0.1.0)\nRequirement already satisfied: PySocks!=1.5.7,>=1.5.6 in ./.venv/lib/python3.9/site-packages (from requests->folium>=0.11.0->geemap) (1.7.1)\nRequirement already satisfied: sniffio>=1.1 in ./.venv/lib/python3.9/site-packages (from anyio<4,>=3.1.0->jupyter-server~=1.16->jupyterlab>=3->geemap) (1.2.0)\nRequirement already satisfied: protobuf<5.0.0dev,>=3.15.0 in ./.venv/lib/python3.9/site-packages (from google-api-core<3dev,>=1.21.0->google-api-python-client<2,>=1.12.1->earthengine-api>=0.1.304->geemap) (4.21.5)\nRequirement already satisfied: googleapis-common-protos<2.0dev,>=1.56.2 in ./.venv/lib/python3.9/site-packages (from google-api-core<3dev,>=1.21.0->google-api-python-client<2,>=1.12.1->earthengine-api>=0.1.304->geemap) (1.56.4)\nRequirement already satisfied: google-crc32c<2.0dev,>=1.0 in ./.venv/lib/python3.9/site-packages (from google-resumable-media>=2.3.2->google-cloud-storage->earthengine-api>=0.1.304->geemap) (1.3.0)\nRequirement already satisfied: zipp>=0.5 in ./.venv/lib/python3.9/site-packages (from importlib-metadata>=3.6->jupyterlab-server~=2.10->jupyterlab>=3->geemap) (3.8.1)\nRequirement already satisfied: debugpy>=1.0 in ./.venv/lib/python3.9/site-packages (from ipykernel>=4.5.1->ipywidgets->ipyfilechooser>=0.6.0->geemap) (1.6.3)\nRequirement already satisfied: psutil in ./.venv/lib/python3.9/site-packages (from ipykernel>=4.5.1->ipywidgets->ipyfilechooser>=0.6.0->geemap) (5.9.1)\nRequirement already satisfied: parso<0.9.0,>=0.8.0 in ./.venv/lib/python3.9/site-packages (from jedi>=0.16->ipython->jupyterlab>=3->geemap) (0.8.3)\nRequirement already satisfied: pyrsistent!=0.17.0,!=0.17.1,!=0.17.2,>=0.14.0 in ./.venv/lib/python3.9/site-packages (from jsonschema>=3.0.1->jupyterlab-server~=2.10->jupyterlab>=3->geemap) (0.18.1)\nRequirement already satisfied: attrs>=17.4.0 in ./.venv/lib/python3.9/site-packages (from jsonschema>=3.0.1->jupyterlab-server~=2.10->jupyterlab>=3->geemap) (22.1.0)\nRequirement already satisfied: entrypoints in ./.venv/lib/python3.9/site-packages (from jupyter-client>=6.1.12->jupyter-server~=1.16->jupyterlab>=3->geemap) (0.4)\nRequirement already satisfied: tinycss2 in ./.venv/lib/python3.9/site-packages (from nbconvert>=6.4.4->jupyter-server~=1.16->jupyterlab>=3->geemap) (1.1.1)\nRequirement already satisfied: lxml in ./.venv/lib/python3.9/site-packages (from nbconvert>=6.4.4->jupyter-server~=1.16->jupyterlab>=3->geemap) (4.9.1)\nRequirement already satisfied: nbclient>=0.5.0 in ./.venv/lib/python3.9/site-packages (from nbconvert>=6.4.4->jupyter-server~=1.16->jupyterlab>=3->geemap) (0.6.7)\nRequirement already satisfied: pandocfilters>=1.4.1 in ./.venv/lib/python3.9/site-packages (from nbconvert>=6.4.4->jupyter-server~=1.16->jupyterlab>=3->geemap) (1.5.0)\n\n\nRequirement already satisfied: defusedxml in ./.venv/lib/python3.9/site-packages (from nbconvert>=6.4.4->jupyter-server~=1.16->jupyterlab>=3->geemap) (0.7.1)\nRequirement already satisfied: jupyterlab-pygments in ./.venv/lib/python3.9/site-packages (from nbconvert>=6.4.4->jupyter-server~=1.16->jupyterlab>=3->geemap) (0.2.2)\nRequirement already satisfied: mistune<3,>=2.0.3 in ./.venv/lib/python3.9/site-packages (from nbconvert>=6.4.4->jupyter-server~=1.16->jupyterlab>=3->geemap) (2.0.4)\nRequirement already satisfied: bleach in ./.venv/lib/python3.9/site-packages (from nbconvert>=6.4.4->jupyter-server~=1.16->jupyterlab>=3->geemap) (5.0.1)\nRequirement already satisfied: fastjsonschema in ./.venv/lib/python3.9/site-packages (from nbformat>=5.2.0->jupyter-server~=1.16->jupyterlab>=3->geemap) (2.16.1)\nRequirement already satisfied: ptyprocess>=0.5 in ./.venv/lib/python3.9/site-packages (from pexpect>4.3->ipython->jupyterlab>=3->geemap) (0.7.0)\nRequirement already satisfied: wcwidth in ./.venv/lib/python3.9/site-packages (from prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0->ipython->jupyterlab>=3->geemap) (0.2.5)\nRequirement already satisfied: pyasn1<0.5.0,>=0.4.6 in ./.venv/lib/python3.9/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.4.1->earthengine-api>=0.1.304->geemap) (0.4.8)\nRequirement already satisfied: argon2-cffi-bindings in ./.venv/lib/python3.9/site-packages (from argon2-cffi->jupyter-server~=1.16->jupyterlab>=3->geemap) (21.2.0)\nRequirement already satisfied: executing in ./.venv/lib/python3.9/site-packages (from stack-data->ipython->jupyterlab>=3->geemap) (1.0.0)\nRequirement already satisfied: pure-eval in ./.venv/lib/python3.9/site-packages (from stack-data->ipython->jupyterlab>=3->geemap) (0.2.2)\nRequirement already satisfied: asttokens in ./.venv/lib/python3.9/site-packages (from stack-data->ipython->jupyterlab>=3->geemap) (2.0.8)\nRequirement already satisfied: cffi>=1.0.1 in ./.venv/lib/python3.9/site-packages (from argon2-cffi-bindings->argon2-cffi->jupyter-server~=1.16->jupyterlab>=3->geemap) (1.15.1)\nRequirement already satisfied: webencodings in ./.venv/lib/python3.9/site-packages (from bleach->nbconvert>=6.4.4->jupyter-server~=1.16->jupyterlab>=3->geemap) (0.5.1)\nRequirement already satisfied: pycparser in ./.venv/lib/python3.9/site-packages (from cffi>=1.0.1->argon2-cffi-bindings->argon2-cffi->jupyter-server~=1.16->jupyterlab>=3->geemap) (2.21)\n\n\nWARNING: You are using pip version 21.3.1; however, version 22.2.2 is available.\nYou should consider upgrading via the '/Users/vehpus/git/gee-to-rasterio-tutorial/.venv/bin/python3.9 -m pip install --upgrade pip' command.\n\n\nCollecting eemont\n  Downloading eemont-0.3.5.tar.gz (123 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nRequirement already satisfied: beautifulsoup4 in ./.venv/lib/python3.9/site-packages (from eemont) (4.11.1)\nRequirement already satisfied: earthengine-api in ./.venv/lib/python3.9/site-packages (from eemont) (0.1.321)\nRequirement already satisfied: ee_extra>=0.0.14 in ./.venv/lib/python3.9/site-packages (from eemont) (0.0.14)\nRequirement already satisfied: numpy in ./.venv/lib/python3.9/site-packages (from eemont) (1.23.2)\nRequirement already satisfied: pandas in ./.venv/lib/python3.9/site-packages (from eemont) (1.4.3)\nRequirement already satisfied: python-box>=6.0.0 in ./.venv/lib/python3.9/site-packages (from eemont) (6.0.2)\nCollecting geopy\n  Downloading geopy-2.2.0-py3-none-any.whl (118 kB)\nRequirement already satisfied: requests in ./.venv/lib/python3.9/site-packages (from eemont) (2.28.1)\nRequirement already satisfied: soupsieve>1.2 in ./.venv/lib/python3.9/site-packages (from beautifulsoup4->eemont) (2.3.2.post1)\nRequirement already satisfied: future in ./.venv/lib/python3.9/site-packages (from earthengine-api->eemont) (0.18.2)\nRequirement already satisfied: google-cloud-storage in ./.venv/lib/python3.9/site-packages (from earthengine-api->eemont) (2.5.0)\nRequirement already satisfied: google-api-python-client<2,>=1.12.1 in ./.venv/lib/python3.9/site-packages (from earthengine-api->eemont) (1.12.11)\nRequirement already satisfied: google-auth>=1.4.1 in ./.venv/lib/python3.9/site-packages (from earthengine-api->eemont) (2.11.0)\nRequirement already satisfied: google-auth-httplib2>=0.0.3 in ./.venv/lib/python3.9/site-packages (from earthengine-api->eemont) (0.1.0)\nRequirement already satisfied: httplib2<1dev,>=0.9.2 in ./.venv/lib/python3.9/site-packages (from earthengine-api->eemont) (0.20.4)\nRequirement already satisfied: httplib2shim in ./.venv/lib/python3.9/site-packages (from earthengine-api->eemont) (0.0.3)\nRequirement already satisfied: six in ./.venv/lib/python3.9/site-packages (from earthengine-api->eemont) (1.16.0)\nCollecting geographiclib<2,>=1.49\n  Downloading geographiclib-1.52-py3-none-any.whl (38 kB)\nRequirement already satisfied: python-dateutil>=2.8.1 in ./.venv/lib/python3.9/site-packages (from pandas->eemont) (2.8.2)\nRequirement already satisfied: pytz>=2020.1 in ./.venv/lib/python3.9/site-packages (from pandas->eemont) (2022.2.1)\nRequirement already satisfied: certifi>=2017.4.17 in ./.venv/lib/python3.9/site-packages (from requests->eemont) (2022.6.15)\nRequirement already satisfied: idna<4,>=2.5 in ./.venv/lib/python3.9/site-packages (from requests->eemont) (3.3)\nRequirement already satisfied: urllib3<1.27,>=1.21.1 in ./.venv/lib/python3.9/site-packages (from requests->eemont) (1.26.12)\nRequirement already satisfied: charset-normalizer<3,>=2 in ./.venv/lib/python3.9/site-packages (from requests->eemont) (2.1.1)\nRequirement already satisfied: google-api-core<3dev,>=1.21.0 in ./.venv/lib/python3.9/site-packages (from google-api-python-client<2,>=1.12.1->earthengine-api->eemont) (2.8.2)\nRequirement already satisfied: uritemplate<4dev,>=3.0.0 in ./.venv/lib/python3.9/site-packages (from google-api-python-client<2,>=1.12.1->earthengine-api->eemont) (3.0.1)\nRequirement already satisfied: cachetools<6.0,>=2.0.0 in ./.venv/lib/python3.9/site-packages (from google-auth>=1.4.1->earthengine-api->eemont) (5.2.0)\nRequirement already satisfied: rsa<5,>=3.1.4 in ./.venv/lib/python3.9/site-packages (from google-auth>=1.4.1->earthengine-api->eemont) (4.9)\nRequirement already satisfied: pyasn1-modules>=0.2.1 in ./.venv/lib/python3.9/site-packages (from google-auth>=1.4.1->earthengine-api->eemont) (0.2.8)\nRequirement already satisfied: pyparsing!=3.0.0,!=3.0.1,!=3.0.2,!=3.0.3,<4,>=2.4.2 in ./.venv/lib/python3.9/site-packages (from httplib2<1dev,>=0.9.2->earthengine-api->eemont) (3.0.9)\nRequirement already satisfied: google-resumable-media>=2.3.2 in ./.venv/lib/python3.9/site-packages (from google-cloud-storage->earthengine-api->eemont) (2.3.3)\nRequirement already satisfied: google-cloud-core<3.0dev,>=2.3.0 in ./.venv/lib/python3.9/site-packages (from google-cloud-storage->earthengine-api->eemont) (2.3.2)\nRequirement already satisfied: googleapis-common-protos<2.0dev,>=1.56.2 in ./.venv/lib/python3.9/site-packages (from google-api-core<3dev,>=1.21.0->google-api-python-client<2,>=1.12.1->earthengine-api->eemont) (1.56.4)\nRequirement already satisfied: protobuf<5.0.0dev,>=3.15.0 in ./.venv/lib/python3.9/site-packages (from google-api-core<3dev,>=1.21.0->google-api-python-client<2,>=1.12.1->earthengine-api->eemont) (4.21.5)\nRequirement already satisfied: google-crc32c<2.0dev,>=1.0 in ./.venv/lib/python3.9/site-packages (from google-resumable-media>=2.3.2->google-cloud-storage->earthengine-api->eemont) (1.3.0)\nRequirement already satisfied: pyasn1<0.5.0,>=0.4.6 in ./.venv/lib/python3.9/site-packages (from pyasn1-modules>=0.2.1->google-auth>=1.4.1->earthengine-api->eemont) (0.4.8)\nUsing legacy 'setup.py install' for eemont, since package 'wheel' is not installed.\nInstalling collected packages: geographiclib, geopy, eemont\n    Running setup.py install for eemont: started\n    Running setup.py install for eemont: finished with status 'done'\nSuccessfully installed eemont-0.3.5 geographiclib-1.52 geopy-2.2.0\n\n\nWARNING: You are using pip version 21.3.1; however, version 22.2.2 is available.\nYou should consider upgrading via the '/Users/vehpus/git/gee-to-rasterio-tutorial/.venv/bin/python3.9 -m pip install --upgrade pip' command.\n\n\nCollecting autopep8\n  Downloading autopep8-1.7.0-py2.py3-none-any.whl (45 kB)\nCollecting pycodestyle>=2.9.1\n  Downloading pycodestyle-2.9.1-py2.py3-none-any.whl (41 kB)\nCollecting toml\n  Downloading toml-0.10.2-py2.py3-none-any.whl (16 kB)\nInstalling collected packages: toml, pycodestyle, autopep8\nSuccessfully installed autopep8-1.7.0 pycodestyle-2.9.1 toml-0.10.2\n\n\nWARNING: You are using pip version 21.3.1; however, version 22.2.2 is available.\nYou should consider upgrading via the '/Users/vehpus/git/gee-to-rasterio-tutorial/.venv/bin/python3.9 -m pip install --upgrade pip' command.\n\n\nCollecting rasterio\n  Downloading rasterio-1.3.2-cp39-cp39-macosx_10_10_x86_64.whl (31.1 MB)\nCollecting cligj>=0.5\n  Downloading cligj-0.7.2-py3-none-any.whl (7.1 kB)\nRequirement already satisfied: setuptools in ./.venv/lib/python3.9/site-packages (from rasterio) (59.0.1)\nCollecting snuggs>=1.4.1\n  Downloading snuggs-1.4.7-py3-none-any.whl (5.4 kB)\nRequirement already satisfied: attrs in ./.venv/lib/python3.9/site-packages (from rasterio) (22.1.0)\nRequirement already satisfied: numpy>=1.18 in ./.venv/lib/python3.9/site-packages (from rasterio) (1.23.2)\nRequirement already satisfied: certifi in ./.venv/lib/python3.9/site-packages (from rasterio) (2022.6.15)\nRequirement already satisfied: click>=4.0 in ./.venv/lib/python3.9/site-packages (from rasterio) (8.1.3)\nCollecting click-plugins\n  Downloading click_plugins-1.1.1-py2.py3-none-any.whl (7.5 kB)\nCollecting affine\n  Downloading affine-2.3.1-py2.py3-none-any.whl (16 kB)\nRequirement already satisfied: pyparsing>=2.1.6 in ./.venv/lib/python3.9/site-packages (from snuggs>=1.4.1->rasterio) (3.0.9)\nInstalling collected packages: snuggs, cligj, click-plugins, affine, rasterio\nSuccessfully installed affine-2.3.1 click-plugins-1.1.1 cligj-0.7.2 rasterio-1.3.2 snuggs-1.4.7\n\n\nWARNING: You are using pip version 21.3.1; however, version 22.2.2 is available.\nYou should consider upgrading via the '/Users/vehpus/git/gee-to-rasterio-tutorial/.venv/bin/python3.9 -m pip install --upgrade pip' command.\n\n\nRequirement already satisfied: numpy in ./.venv/lib/python3.9/site-packages (1.23.2)\n\n\nWARNING: You are using pip version 21.3.1; however, version 22.2.2 is available.\nYou should consider upgrading via the '/Users/vehpus/git/gee-to-rasterio-tutorial/.venv/bin/python3.9 -m pip install --upgrade pip' command.\n\n\nCollecting blockdiagMagic\n  Downloading blockdiagMagic-0.0.3-py3-none-any.whl (3.8 kB)\nCollecting seqdiag\n  Downloading seqdiag-3.0.0-py3-none-any.whl (2.6 MB)\nCollecting actdiag\n  Downloading actdiag-3.0.0-py3-none-any.whl (2.6 MB)\nCollecting blockdiag\n  Downloading blockdiag-3.0.0-py3-none-any.whl (2.7 MB)\nCollecting nwdiag\n  Downloading nwdiag-3.0.0-py3-none-any.whl (7.7 MB)\nCollecting funcparserlib>=1.0.0a0\n  Downloading funcparserlib-1.0.0-py2.py3-none-any.whl (17 kB)\nRequirement already satisfied: setuptools in ./.venv/lib/python3.9/site-packages (from blockdiag->blockdiagMagic) (59.0.1)\nCollecting webcolors\n  Downloading webcolors-1.12-py3-none-any.whl (9.9 kB)\nRequirement already satisfied: Pillow>3.0 in ./.venv/lib/python3.9/site-packages (from blockdiag->blockdiagMagic) (9.2.0)\nInstalling collected packages: webcolors, funcparserlib, blockdiag, seqdiag, nwdiag, actdiag, blockdiagMagic\nSuccessfully installed actdiag-3.0.0 blockdiag-3.0.0 blockdiagMagic-0.0.3 funcparserlib-1.0.0 nwdiag-3.0.0 seqdiag-3.0.0 webcolors-1.12\n\n\nWARNING: You are using pip version 21.3.1; however, version 22.2.2 is available.\nYou should consider upgrading via the '/Users/vehpus/git/gee-to-rasterio-tutorial/.venv/bin/python3.9 -m pip install --upgrade pip' command.\n\n\n\nimport time\n\nfrom IPython.display import IFrame\n\n\n\n\nRerun jupyter notebook (via the web UI) after installing RISE, then you should see the following button, which opens the slideshow: \n\n\n\n\n\n\nHow to generate a slideshow from a notebook\nAdding Rise to be able to run slideshows from Jupyter\n\n\n\n\nDiagrams should appear when Jupyter is run after the blockdiagMagic is installed.\n\n\nGithub repo\n\n\n\n\n#Reset to png output with: %setdiagpng\n\n\nA -> B -> C;\nB -> D;"
  },
  {
    "objectID": "gee-to-rasterio.html#google-earth-engine",
    "href": "gee-to-rasterio.html#google-earth-engine",
    "title": "Google Earth Engine to Rasterio",
    "section": "Google Earth Engine",
    "text": "Google Earth Engine\nGoogle earth engine combines a multi-petabyte catalog of satellite imagery and geospatial datasets with planetary-scale analysis capabilities\n\nimport ee, eemont, geemap\n# Authenticate and Initialize Earth Engine and geemap.\nee.Authenticate()\nee.Initialize()\n\nTo authorize access needed by Earth Engine, open the following\n        URL in a web browser and follow the instructions:\n        https://code.earthengine.google.com/client-auth?scopes=https%3A//www.googleapis.com/auth/earthengine%20https%3A//www.googleapis.com/auth/devstorage.full_control&request_id=mVjUFy7S5eK91kpFF8-VI6TU3Bblto4QEA5tbf7HbsY&tc=-WkyGP_rJSBvW8UrKIQ-6ywlTn_uK2Y-aB-k4tUDDvk&cc=QY2hMvT-jLDuAljj8X4_sQfbv4IU-6eWyauWhwK9MXg\n        The authorization workflow will generate a code, which you should paste in the box below.\n        \n\n\nEnter verification code: 4/1AdQt8qj3v8rTEDbl7P9PPACFbCuB8XihLrACRsxF1sky8UAm_QDsziMXdlQ\n\nSuccessfully saved authorization token.\n\n\n\n# Example point of interest to filter the image collection.\npoint = ee.Geometry.Point([-75.92, 2.86])\n# Get and filter the Sentinel-2 Surface Reflectance image collection and filter it by region and time.\nS2 = (ee.ImageCollection('COPERNICUS/S2_SR')\n      .filterDate('2020-01-01','2021-01-01').filterBounds(point))\n# Cloud Probability masking is the default method to mask clouds and shadows in Sentinel-2 (method = 'cloud_prob'). By default, the Cloud Probability threshold is 60% (prob = 60).\nS2c = S2.maskClouds()\n\n\n# Visualization\n# Set the visualization parameters.\nrgbUnscaled = {'min':0, 'max':3000, 'bands':['B4','B3','B2']}\n# Use geemap to display results.\nMap = geemap.Map()\nMap.centerObject(point,15)\nMap.addLayer(S2c.median(),rgbUnscaled,'60% Cloud Probability masking')\nMap\n\n\n\n\nIn case of bad internet / viewing in a repo - here is what the map looks like"
  },
  {
    "objectID": "gee-to-rasterio.html#rasterio",
    "href": "gee-to-rasterio.html#rasterio",
    "title": "Google Earth Engine to Rasterio",
    "section": "Rasterio",
    "text": "Rasterio\nRasterio reads and writes geospatial raster data.\nGeographic information systems use GeoTIFF and other formats to organize and store gridded, or raster, datasets. Rasterio reads and writes these formats and provides a Python API based on N-D arrays.\n\nimport rasterio\nfrom rasterio.plot import show\n\nwith rasterio.open(\"https://oin-hotosm.s3.amazonaws.com/56f9b5a963ebf4bc00074e70/0/56f9c2d42b67227a79b4faec.tif\") as src:\n    show(src)\n\n\n\n\nIn case of bad internet / viewing in a repo, here is what the output looks like:"
  },
  {
    "objectID": "gee-to-rasterio.html#high-level---remote-sensing-pipeline",
    "href": "gee-to-rasterio.html#high-level---remote-sensing-pipeline",
    "title": "Google Earth Engine to Rasterio",
    "section": "High Level - Remote Sensing Pipeline",
    "text": "High Level - Remote Sensing Pipeline\nI’ll be giving the hight level data flow with small demonstrate in code - with the goal of providing an easy starting point to fill the “pipeline” with steps relevant to individual projects.\n\n#Reset to png output with: %setdiagpng\n# Hide the input for the diagram after coding\n\n\n\"Get input data\" -> \"Preprocess data\" -> \"\"\"Google Earth Engine\nProcessing\"\"\" -> \"Exporting data\" -> \"Reading Cloud Images\" -> \"Rasterio Raster Analysis\" -> \"Further Computation\";\n\"\"\"Google Earth Engine\nProcessing\"\"\" -> \"\"\"Display on Google Earth Engine\"\"\";\n\"Reading Cloud Images\" -> \"Visualize Rasters\";\n\n\n\n\n\n\"Get input data\" -> \"Preprocess data\" -> \"\"\"Google Earth Engine\nProcessing\"\"\" -> \"...\"\n\"\"\"Google Earth Engine\nProcessing\"\"\" -> \"\"\"Display on Google Earth Engine\"\"\";\n\n\n\n\n\n\"Exporting data\" -> \"Reading Cloud Images\" -> \"Rasterio Raster Analysis\" -> \"Further Computation\";\n\"Reading Cloud Images\" -> \"Visualize Rasters\";\n\n\n\n\n\n1. Get input data\nGoogle Earth Engine data catalog: https://developers.google.com/earth-engine/datasets\nNote: Some data can be accessed using other providers / using other services, some is unique\n\nSatellite Data\n\nSentinel (1, 2, 3) - 2 is used for current 10m res RGB, 1 for 10m res infrared\nLandsat (4, 5, 7. 8. 9) - 8 is widely used for historical data at 30m res\nHigh-Resolution Imagery\nOthers satellites: MODIS, ALOS\n\n\n\n\n\n\nPrecomputed data from previous analysis (manual or ML based)\n\nSurface Temperature\nClimate\nAtmospheric\nWeather\nElevation Data\nLand Use / Land Cover (LULC)\nMore…\n\n\n \n\n\n\nArea of interest (shape)\n\ngeopolitical border (country / state / city)\ncrop boundaries (precomputed or derived)\nforest boundaries (precomputed or derived)\n\n\n\nUploaded Assets (images, shapes, tabular data)\n\nvia the Google Earth Engine web interface.\n\n\n\n\n\n\n\n2. Preprocess input data\n\nFilter images by geographical bounds and time range\nClip images by shape (different than filtering).\nCloud removal\nCalculate spectral indices (research based measures for various ecological phenomena)\n\nTechnically part of processing, but many spectral indices are so common they are often used as input features for additional analysis\nThere are ready made libraries to calculate them: https://github.com/awesome-spectral-indices/spectral\n\nCalculate derived shapes if relevant\n\n\nJavascript Libraries\nI focus on Python APIs in this presentation as they allow us to work with one programming language accross the pipeline, though Google Earth Engine has a language agnostic (REST) API, and an online coding environment using JavaScript (albeit with a slightly limited syntax) as it’s coding language, accessible via code.earthengine.google.com.\nIf you come accross useful code written in JavaScript, conversion isn’t too hard if you know both languages’ syntax (main challenges are anonymous functions and dictionary parameters changing into keyword parameters in Python). Google provides some support for converting code from JavaScript to Python, demonstrated in this notebook.\n\n\nExample: S2 Preprocessing\nBased on this tutorial\n\nAOI = ee.Geometry.Point([-75.92, 2.86]).buffer(100)\nSTART_DATE = '2020-01-01'\nEND_DATE = '2021-01-01'\nCLOUD_FILTER = 60\nCLD_PRB_THRESH = 50\nNIR_DRK_THRESH = 0.15\nCLD_PRJ_DIST = 1\nBUFFER = 50\n\n\ndef add_cloud_bands(img):\n    # Get s2cloudless image, subset the probability band.\n    cld_prb = ee.Image(img.get('s2cloudless')).select('probability')\n\n    # Condition s2cloudless by the probability threshold value.\n    is_cloud = cld_prb.gt(CLD_PRB_THRESH).rename('clouds')\n\n    # Add the cloud probability layer and cloud mask as image bands.\n    return img.addBands(ee.Image([cld_prb, is_cloud]))\n\n\ndef add_shadow_bands(img):\n    # Identify water pixels from the SCL band.\n    not_water = img.select('SCL').neq(6)\n\n    # Identify dark NIR pixels that are not water (potential cloud shadow pixels).\n    SR_BAND_SCALE = 1e4\n    dark_pixels = img.select('B8').lt(\n        NIR_DRK_THRESH*SR_BAND_SCALE).multiply(not_water).rename('dark_pixels')\n\n    # Determine the direction to project cloud shadow from clouds (assumes UTM projection).\n    shadow_azimuth = ee.Number(90).subtract(\n        ee.Number(img.get('MEAN_SOLAR_AZIMUTH_ANGLE')))\n\n    # Project shadows from clouds for the distance specified by the CLD_PRJ_DIST input.\n    cld_proj = (img.select('clouds').directionalDistanceTransform(shadow_azimuth, CLD_PRJ_DIST*10)\n                .reproject(**{'crs': img.select(0).projection(), 'scale': 100})\n                .select('distance')\n                .mask()\n                .rename('cloud_transform'))\n\n    # Identify the intersection of dark pixels with cloud shadow projection.\n    shadows = cld_proj.multiply(dark_pixels).rename('shadows')\n\n    # Add dark pixels, cloud projection, and identified shadows as image bands.\n    return img.addBands(ee.Image([dark_pixels, cld_proj, shadows]))\n\n\ndef get_s2_sr_cld_col(aoi, start_date, end_date):\n    # Import and filter S2 SR.\n    s2_sr_col = (ee.ImageCollection('COPERNICUS/S2_SR')\n                 .filterBounds(aoi)\n                 .filterDate(start_date, end_date)\n                 .filter(ee.Filter.lte('CLOUDY_PIXEL_PERCENTAGE', CLOUD_FILTER)))\n\n    # Import and filter s2cloudless.\n    s2_cloudless_col = (ee.ImageCollection('COPERNICUS/S2_CLOUD_PROBABILITY')\n                        .filterBounds(aoi)\n                        .filterDate(start_date, end_date))\n\n    # Join the filtered s2cloudless collection to the SR collection by the 'system:index' property.\n    return ee.ImageCollection(ee.Join.saveFirst('s2cloudless').apply(**{\n        'primary': s2_sr_col,\n        'secondary': s2_cloudless_col,\n        'condition': ee.Filter.equals(**{\n            'leftField': 'system:index',\n            'rightField': 'system:index'\n        })\n    }))\n\n\ndef add_cld_shdw_mask(img):\n    # Add cloud component bands.\n    img_cloud = add_cloud_bands(img)\n\n    # Add cloud shadow component bands.\n    img_cloud_shadow = add_shadow_bands(img_cloud)\n\n    # Combine cloud and shadow mask, set cloud and shadow as value 1, else 0.\n    is_cld_shdw = img_cloud_shadow.select('clouds').add(\n        img_cloud_shadow.select('shadows')).gt(0)\n\n    # Remove small cloud-shadow patches and dilate remaining pixels by BUFFER input.\n    # 20 m scale is for speed, and assumes clouds don't require 10 m precision.\n    is_cld_shdw = (is_cld_shdw.focalMin(2).focalMax(BUFFER*2/20)\n                   .reproject(**{'crs': img.select([0]).projection(), 'scale': 20})\n                   .rename('cloudmask'))\n\n    # Add the final cloud-shadow mask to the image.\n    return img_cloud_shadow.addBands(is_cld_shdw)\n\n\ndef display_cloud_layers(col, Map):\n    # Mosaic the image collection.\n    img = col.mosaic()\n\n    # Subset layers and prepare them for display.\n    clouds = img.select('clouds').selfMask()\n    shadows = img.select('shadows').selfMask()\n    dark_pixels = img.select('dark_pixels').selfMask()\n    probability = img.select('probability')\n    cloudmask = img.select('cloudmask').selfMask()\n    cloud_transform = img.select('cloud_transform')\n\n    # Create a map object.\n    Map.centerObject(AOI, 12)\n\n    # Add layers to the Google Earth Engine map.\n    Map.addLayer(img,\n                 {'bands': ['B4', 'B3', 'B2'], 'min': 0,\n                     'max': 2500, 'gamma': 1.1},\n                 'S2 image', True, 1)\n    Map.addLayer(probability,\n                 {'min': 0, 'max': 100},\n                 'probability (cloud)', True, 1)\n    Map.addLayer(clouds,\n                 {'palette': ['e056fd']},\n                 'clouds', True, 1)\n    Map.addLayer(cloud_transform,\n                 {'min': 0, 'max': 1, 'palette': ['white', 'black']},\n                 'cloud_transform', False, 1)\n    Map.addLayer(dark_pixels,\n                 {'palette': ['orange']},\n                 'dark_pixels', True, 1)\n    Map.addLayer(shadows, {'palette': ['yellow']},\n                 'shadows', True, 1)\n    Map.addLayer(cloudmask, {'palette': ['orange']},\n                 'cloudmask', True, 0.5)\n\n\ns2_sr_cld_col_eval = get_s2_sr_cld_col(AOI, START_DATE, END_DATE)\n\ns2_sr_cld_col_eval_disp = s2_sr_cld_col_eval.map(add_cld_shdw_mask)\n\n\nMap = geemap.Map()\ndisplay_cloud_layers(s2_sr_cld_col_eval_disp, Map)\nMap  # Display the map.\n\n\n\n\nIn case of bad internet / viewing in a repo - here is what the map looks like \nNote: most preprocessing / spectral indices calculations can be easily performed using the eemont extension (as seen in the first GEE Example)\nRead more about these features in the eemont library’s documentation\n\nIFrame('https://eemont.readthedocs.io/en/latest/#clouds-and-shadows-masking', width=900, height=500)\n\n\n        \n        \n\n\nIn case of bad internet / viewing in a repo - here is what the documentation looks like \n\n\n\n3. Processing on Google Cloud\nUse Google Cloud via Google Earth Engine to run algorithms directly on large inputs (to save on data transfers and taking advantage of Google’s Cloud).\n\nProvided Statistical / Machine learning models\nTimeseries analysis (i.e. CCDC)\nSampling the data (i.e. by pixel)\nReduction operations (i.e. to value)\nPixel based aggregations\nCustom code running on a Google Cloud Platform (i.e. custom made Tensorflow models).\n\n\nGoogle Earth Client v.s. Server Computations\nIt is important to distinguish Earth Engine objects from Python objects or primitives that might be in your code. You can manipulate objects on the server by manipulating client-side “proxy” objects in your script. You can recognize a proxy object as anything starting with ee.\nThese Earth Engine proxy objects do not contain any actual data and are just handles for objects on the server.\nMore information (worth reading) can be found here.\n\nclient_string = 'foo'\nserver_string = ee.String('foo')\nprint(client_string)\nprint(server_string)\nclient_string != server_string\n\nfoo\nee.String({\n  \"constantValue\": \"foo\"\n})\n\n\nTrue\n\n\n\n\nGetting Computation Results from the server\nThough GEE performs server side operations, we can still access results from them by calling the method getInfo on GEE objects.\n\nclient_side_concat = client_string + 'bar'\nserver_side_concat = server_string.cat('bar')\nprint(client_side_concat)\nprint(server_side_concat)\ncomputed_server_side_concat = server_side_concat.getInfo()\nprint(computed_server_side_concat)\ncomputed_server_side_concat == client_side_concat\n\nfoobar\nee.String({\n  \"functionInvocationValue\": {\n    \"functionName\": \"String.cat\",\n    \"arguments\": {\n      \"string1\": {\n        \"constantValue\": \"foo\"\n      },\n      \"string2\": {\n        \"constantValue\": \"bar\"\n      }\n    }\n  }\n})\nfoobar\n\n\nTrue\n\n\n\n\nRunning on the Cloud\nOnce asked to run (by running an export or calling .getInfo() on an object) these operations are performed asynchronously on automatically assigned Google Cloud platforms.\nTheir speed will depend on general usage and the size of the task. Some tasks might fail, requiring reducing the area of interest / amount of images analysed to complete.\n\n\nExample: Supervised Classification\nBased on this tutorial\n\nLANDSAT_8 = ee.ImageCollection('LANDSAT/LC08/C02/T1_L2')\n\nBIT_31 = '11111'\nDEC_31 = int(BIT_31, 2)\n\n# Define a function that scales and masks Landsat 8 surface reflectance images.\n\n\ndef prepSrL8(image):\n    # Develop masks for unwanted pixels (fill, cloud, cloud shadow).\n    # https://www.usgs.gov/media/images/landsat-collection-2-pixel-quality-assessment-bit-index\n    # image.select - Returns an image with the selected bands\n    qaMask = image.select('QA_PIXEL').bitwiseAnd(DEC_31).eq(0)\n    # https://www.usgs.gov/landsat-missions/landsat-collection-2-quality-assessment-bands\n    saturationMask = image.select('QA_RADSAT').eq(0)\n\n    img_dict = image.toDictionary()\n\n    # Apply the scaling factors to the appropriate bands.\n    def getFactorImg(factorNames):\n        factorList = img_dict.select(factorNames).values()\n        return ee.Image.constant(factorList)\n\n    # select accepts regular exceptions\n    scaleImg = getFactorImg(\n        ['REFLECTANCE_MULT_BAND_.|TEMPERATURE_MULT_BAND_ST_B10'])\n    offsetImg = getFactorImg(\n        ['REFLECTANCE_ADD_BAND_.|TEMPERATURE_ADD_BAND_ST_B10'])\n    scaled = image.select('SR_B.|ST_B10').multiply(scaleImg).add(offsetImg)\n\n    # Replace original bands with scaled bands and apply masks.\n    # Image.addBands(srcImg, names, overwrite)\n    return image \\\n        .addBands(scaled, None, True) \\\n        .updateMask(qaMask) \\\n        .updateMask(saturationMask)\n\n\nfirst_start_date = '2021-03-01'\nfirst_end_date = '2021-07-01'\n\nfirst_date_images = LANDSAT_8.filterDate(first_start_date, first_end_date)\n\n# Make a cloud-free Landsat 8 surface reflectance composite.\nfirst_image = first_date_images.map(prepSrL8).median()\n\n# Use these bands for prediction.\nrgb_bands = ['SR_B4',  'SR_B3',  'SR_B2']\nnon_visual_wavelengths = ['SR_B5', 'SR_B6', 'SR_B7']\ntemp_bands = ['ST_B10']\nwavelengths_with_temp_bands = rgb_bands + non_visual_wavelengths + temp_bands\n# SR_B2     Band 2 (blue) surface reflectance\n# SR_B3     Band 3 (green) surface reflectance\n# SR_B4     Band 4 (red) surface reflectance\n# SR_B5     Band 5 (near infrared) surface reflectance\n# SR_B6     Band 6 (shortwave infrared 1) surface reflectance\n# SR_B7     Band 7 (shortwave infrared 2) surface reflectance\n# ST_B10    Band 10 surface temperature. If 'PROCESSING_LEVEL' is set to 'L2SR', this band is fully masked out.\n\nfirst_prediction_bands = first_image.select(wavelengths_with_temp_bands)\n\n# Load training points. The numeric property 'class' stores known labels.\npoints = ee.FeatureCollection('GOOGLE/EE/DEMOS/demo_landcover_labels')\n\n# This property stores the land cover labels as consecutive integers starting from zero.\nlandcover_label = 'landcover'\n\n# Overlay the points on the imagery to get training.\nfirst_training = first_prediction_bands.sampleRegions(**{\n    'collection': points,\n    'properties': [landcover_label],\n    'scale': 30\n})\n\n# Train a CART classifier with default parameters.\nfirst_trained = ee.Classifier.smileCart().train(\n    first_training, landcover_label, wavelengths_with_temp_bands)\n\n# Classify the image with the same bands used for training.\nfirst_classified = first_image.select(\n    wavelengths_with_temp_bands).classify(first_trained)\n\nClassificationMap = geemap.Map()\n\n# Display the inputs and the results.\nClassificationMap.setCenter(-122.0877, 37.7880, 11)\nClassificationMap.addLayer(first_image,\n                           {'bands': rgb_bands, 'min': 0, 'max': 0.25},\n                           'sat-image')\nClassificationMap.addLayer(first_classified,\n                           {'min': 0, 'max': 2, 'palette': [\n                               'orange', 'green', 'blue']},\n                           'classification')\n\n\nClassificationMap\n\n\n\n\nIn case of bad internet / viewing in a repo - here is what the map looks like \n\n\n\nEnding A: Display data on Google Earth Engine\nIn some cases, keeping our code and data on Google Earth Engine is enough, as the platform provides us with the ability to: - generate interactive maps with embedded layers and data - displayed in notebooks or using the JavaScript API - code apps running wholely on the Google Earth Engine plaform - only using the JavaScript API (i.e. CCDC Tools, Dynamic World)\n\nIFrame('https://parevalo_bu.users.earthengine.app/view/visualize-ccdc', width=900, height=250)\n\n\n        \n        \n\n\n\nIFrame('https://dynamicworld.app/explore', width=900, height=350)\n\n\n        \n        \n\n\nIn case of bad internet / viewing in a repo - here is what the apps looks like \n\nAdvantages:\n\nLess code to handle\nGoogle provided basemap\nNo additional costs for hosting / map access\n\n\n\nDisadvantages:\n\nVendor lock-in\nLimited access to data outside the platform (mainly by uploading to GCS / Google Earth Engine directly)\nRequires using Google Cloud and learning Google Earth Engine APIs to run custom code\nUI is limited to Google Earth Engine APIs\nLicensing limitations due to code running on Google Platform\n\n\n\n\n4. Exporting data\nGoogle Earth Engine provides library support to export the following: - Tables - data in columns and rows, i.e. CSV data - Images - 3D arrays of data (multiband images) with various data types and additional metadata - i.e. GeoTiff data - Maps - a rectangular pyramid of map tiles for use with web map viewers (images at different zoom levels).\nData can be exported to - Google Earth Engine as assets - Google Drive as files - Google Cloud Storage as files on “bucket” storage (storage with no predefined size limit and apis used for ease in streaming the data). * Note: GeoTIFS in Google Cloud Storage can be read directly using the ee.Image.loadGeoTIFF static method (docs).\n\nExample: Code to Handle Exports\nBased on this tutorial\n\none_hour_in_secs = 60 * 60\n\n\ndef task_status(task_id):\n    \"\"\"Fetches the current status of the task.\n\n    Returns:\n      A dictionary describing the current status of the task as it appears on\n      the EE server. Includes the following fields:\n      - state: One of the values in Task.State.\n      - creation_timestamp_ms: The Unix timestamp of when the task was created.\n      - update_timestamp_ms: The Unix timestamp of when the task last changed.\n      - output_url: URL of the output. Appears only if state is COMPLETED.\n      - error_message: Failure reason. Appears only if state is FAILED.\n      May also include other fields.\n    \"\"\"\n    result = ee.data.getTaskStatus(task_id)[0]\n\n    if result['state'] == 'UNKNOWN':\n        result['state'] = ee.batch.Task.State.UNSUBMITTED\n\n    return result\n\n\ndef is_task_active(task_id):\n    \"\"\"Returns whether the task is still running.\"\"\"\n    return task_status(task_id)['state'] in (ee.batch.Task.State.READY,\n                                             ee.batch.Task.State.RUNNING,\n                                             ee.batch.Task.State.CANCEL_REQUESTED)\n\n\ndef wait_for_task_to_finish(task, end_msg=\"\"):\n    while task.active():\n        print('Polling for task (id: {}).'.format(task.id))\n        time.sleep(5)\n\n    status = task.status()\n    print(status)\n    if (status['state'] != 'FAILED'):\n        if end_msg:\n            print(end_msg)\n        return True, status\n    else:\n        return False, status\n\n\ndef wait_for_task_id_to_finish(task_id, end_msg=\"\"):\n    while is_task_active(task_id):\n        print('Polling for task (id: {}).'.format(task_id))\n        time.sleep(5)\n\n    status = task_status(task_id)\n    print(status)\n    if (status['state'] != 'FAILED'):\n        if end_msg:\n            print(end_msg)\n        return True, status\n    else:\n        print(f\"Completed with status '{status}'\")\n        return False, status\n\n\ndef run_export_func_sync(export_func, table_output, output_filename, output_bucket):\n    task = export_func(table_output, output_filename, output_bucket)\n    task.start()\n    wait_for_task_to_finish(\n        task, f'Task {task.id} is done, saved to {output_filename}')\n\n\ndef generate_export_image_to_storage_task(img_output, output_filename, output_bucket):\n    image, region = img_output\n    # Export a GeoTIF file to Cloud Storage.\n\n    return ee.batch.Export.image.toCloudStorage(**{\n        'image': image,\n        'region':region,\n        'crs': 'EPSG:4326',\n        'scale': 10,\n        'maxPixels':1e13,\n        'bucket': output_bucket,\n        'fileNamePrefix': output_filename,\n    })\n\ndef generate_export_table_to_storage_task(table_output, output_filename, output_bucket):\n    # Export a CSV file to Cloud Storage.\n    return ee.batch.Export.table.toCloudStorage(\n        collection=table_output,\n        bucket=output_bucket,\n        fileNamePrefix=output_filename,\n    )\n\n\n\n\n5. Reading Cloud Images\n\nAccess Locally\nCopy images locally before processing (in case of a need for faster code access to the image, i.e. multiple reads of the whole image for analysis / usage in an ML model).\n\n\n\nwith rasterio.open('data/RGB.byte.tif') as dataset:\n    print(dataset.profile)\n\n\nAccess Remotely\nAccess images remotely via cloud (in case of less frequent read access / need for infrastructure flexibility, i.e a conversion pipeline or displaying the map - assuming data is saved in a “streamable” format - AKA Cloud Optimized GeoTiffs).\n Image Source - planet.com\nwith rasterio.open(\"https://oin-hotosm.s3.amazonaws.com/56f9b5a963ebf4bc00074e70/0/56f9c2d42b67227a79b4faec.tif\") as src:\n    show(src)\n\n\nGDAL and Virtual File Systems\nThis flexibility in access is possible by using the Geospatial Data Abstraction Library - the de-facto standard for reading / writing raster data, and it’s support for virtual file systems. It also supports reading archived data.\n\n\n\n\n\nAdditional read methods\nSome more read / write methods are demonstrated in this gist.\n\n\n\nimage.png\n\n\n\n\n\nEnding B: Visualize Rasters\n\nServe COGs using GeoServer\nhttp://geoserver.org/ https://github.com/geoserver/geoserver\nGeoServer is an open source server for sharing geospatial data. Designed for interoperability, it publishes data from any major spatial data source using open standards, including COGs:\nhttps://docs.geoserver.org/latest/en/user/community/cog/cog.html?highlight=geotiff\n\n\nServe COGs using MapTiler\nhttps://www.maptiler.com/server/\nhttps://documentation.maptiler.com/hc/en-us/articles/4404732284305-Imagery-Hosting- GeoTIFF- MapTiler Server is software for self-hosting data produced by the MapTiler platform. Among other\nthings, it can convert Shapefiles or raster images for super fast map loading, and serve pre- generated map tiles in GeoPackage or MBTiles format.\n\n\nCustom Built Servers\nLibraries that use GDAL as a low level layer for reading GeoTIFFs support streaming raster data from bucket storage and other remote sources, including various libraries used to create tile servers from GeoTIFFs.\nMany of the supported libraries are listed on the COG website: https://www.cogeo.org.\nFor a easy to use Python based server, I recommend Terracotta.\n\n\n\n5. Using Rasterio for Raster Analysis\n\nimport rasterio\n# Open a geospatial dataset\ndataset = rasterio.open(\"https://oin-hotosm.s3.amazonaws.com/56f9b5a963ebf4bc00074e70/0/56f9c2d42b67227a79b4faec.tif\")\nprint(dataset)\n\n<open DatasetReader name='https://oin-hotosm.s3.amazonaws.com/56f9b5a963ebf4bc00074e70/0/56f9c2d42b67227a79b4faec.tif' mode='r'>\n\n\n\n# what is the name of this image\nimg_name = dataset.name\nprint('Image filename: {n}\\n'.format(n=img_name))\n\n# How many bands does this image have?\nnum_bands = dataset.count\nprint('Number of bands in image: {n}\\n'.format(n=num_bands))\n\n# How many rows and columns?\nrows, cols = dataset.shape\nprint('Image size is: {r} rows x {c} columns\\n'.format(r=rows, c=cols))\n\nImage filename: https://oin-hotosm.s3.amazonaws.com/56f9b5a963ebf4bc00074e70/0/56f9c2d42b67227a79b4faec.tif\n\nNumber of bands in image: 3\n\nImage size is: 25201 rows x 20179 columns\n\n\n\n\n# Does the raster have a description or metadata?\ndesc = dataset.descriptions\nmetadata = dataset.meta\n\nprint('Raster description: {desc}\\n'.format(desc=desc))\n\n# What driver was used to open the raster?\ndriver = dataset.driver\nprint('Raster driver: {d}\\n'.format(d=driver))\n\n# What is the raster's projection?\nproj = dataset.crs\nprint('Image projection:')\nprint(proj)\n\nRaster description: (None, None, None)\n\nRaster driver: GTiff\n\nImage projection:\nEPSG:32759 \n\n\n\n\n# What is the raster's \"geo-transform\"\ngt = dataset.transform\n\nprint('Image geo-transform:\\n{gt}\\n'.format(gt=gt))\n\nprint('All raster metadata:')\nprint(metadata)\n\nImage geo-transform:\n| 0.04, 0.00, 229579.08|\n| 0.00,-0.04, 8057866.86|\n| 0.00, 0.00, 1.00|\n\nAll raster metadata:\n{'driver': 'GTiff', 'dtype': 'uint8', 'nodata': None, 'width': 20179, 'height': 25201, 'count': 3, 'crs': CRS.from_epsg(32759), 'transform': Affine(0.0362, 0.0, 229579.08329,\n       0.0, -0.0362, 8057866.857120001)}\n\n\nThe rasterio Dataset object we created contains a lot of useful information but it is not directly used to read in the raster image. Instead we will need to access the raster’s bands using the read() method:\n\n# A window is a view onto a rectangular subset of a raster dataset and is described in rasterio by\n# column and row offsets and width and height in pixels. These may be ints or floats.\nfrom rasterio.windows import Window\nrow_start = 0\nrow_stop = 1000\ncol_start = 0\ncol_stop = 1000\nwindow = Window.from_slices((row_start, row_stop), (col_start, col_stop))\n\n# Open the second band in our image\ndata = dataset.read(window=window)\ndata.shape # check out the dimensions of the image\n\n(3, 1000, 1000)\n\n\n\nimport numpy as np\n\n# What are the image's datatypes?\ndatatype = dataset.dtypes\nprint('Band datatypes: {dt}'.format(dt=datatype))\n\n# How about some image statistics?\nimage_mean = np.mean(data)\nimage_min = np.amin(data)\nimage_max = np.amax(data)\nimage_stddev = np.std(data)\nprint('Image range: {minimum} - {maximum}'.format(maximum=image_max,\n                                                 minimum=image_min))\nprint('Image mean, stddev: {m}, {s}\\n'.format(m=image_mean, s=image_stddev))\n\nBand datatypes: ('uint8', 'uint8', 'uint8')\nImage range: 0 - 0\nImage mean, stddev: 0.0, 0.0\n\n\n\n\n\nEnding C: Use Raster Data as Input for Further Computation\nAs you can see, reading rasterio data generates numpy arrays that can be processed in any Data Analysis / Machine Learning ecosystem. There is no “right” way to proceed - so either use libraries you have experience, or start from tutorials, such as:\n\nhttps://www.drivendata.co/blog/cloud-cover-benchmark/\nhttps://colab.research.google.com/github/ishgirwan/omdena_hdi/blob/master/training_model.ipynb#scrollTo=gsgOsjXXwWhp"
  },
  {
    "objectID": "gee-to-rasterio.html#resources-tutorials",
    "href": "gee-to-rasterio.html#resources-tutorials",
    "title": "Google Earth Engine to Rasterio",
    "section": "Resources / Tutorials",
    "text": "Resources / Tutorials\n\nGeeMap Library Documentation\nEe-mont User Guide\nEnd-to-end GEE\nOpenGeo Tutorial\nPublic GEE Repositories"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "About",
    "section": "",
    "text": "An interactive presentation / tutorial on geospatial analysis using Google Earth Engine and Rasterio"
  },
  {
    "objectID": "index.html#setting-up-the-notebooks-environment",
    "href": "index.html#setting-up-the-notebooks-environment",
    "title": "About",
    "section": "Setting up the notebook’s environment",
    "text": "Setting up the notebook’s environment\n\nPython dependencies\nI recommend running in a virtual environment / colab.\n\npip install jupyter_contrib_nbextensions\npip install RISE\npip install geemap\npip install eemont\npip install autopep8\npip install rasterio\npip install numpy\npip install blockdiagMagic\n\n\nimport time\n\nfrom IPython.display import IFrame\n\n\n\nHow to view this notebook as a slide\nRerun jupyter notebook (via the web UI) after installing RISE, then you should see the following button, which opens the slideshow: \n\nPreview\n\n\n\nMore about slideshows in Jupyter\nHow to generate a slideshow from a notebook\nAdding Rise to be able to run slideshows from Jupyter\n\n\n\nIn Code Diagrams\nDiagrams should appear when Jupyter is run after the blockdiagMagic is installed.\n\nMore about the library\nGithub repo\n\n\nExample\n\n#Reset to png output with: %setdiagpng\n\n\nA -> B -> C;\nB -> D;"
  }
]